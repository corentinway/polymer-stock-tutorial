<!doctype html>
<html>
  <head>
    <title>stock app test</title>
    <script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../bower_components/web-component-tester/browser.js"></script>

    <link rel="import" href="../bower_components/polymer/polymer.html">
    <!-- sut imported -->
    <link rel="import" href="../src/stock-app.html">
  </head>
  <body>
    <!-- component to test : isolated into a fixture -->
    <test-fixture id="simple">
      <template>
        <stock-app></stock-app>
      </template>
    </test-fixture>
    <script>
    suite( '<stock-app>', function () {
      var sut;
      var sutInputField;
      var sutAddButton;
      setup( function () {
        sut = fixture( 'simple' );
        sutInputField = sut.querySelector( 'input' );
        sutAddButton = sut.querySelector( 'button' );
      } );
      test( 'should have 3 item at the begining', function () {
        // initial state : 3 elements
        expect( sut.stocks.length ).to.be.equal( 3 );
        expect( sut.stocks[0] ).to.be.equal( 'lait' );
        expect( sut.stocks[1] ).to.be.equal( 'céréals' );
        expect( sut.stocks[2] ).to.be.equal( 'fraises' );
      } );
      test( 'should be able to add one more elements' , function () {
        // add one element
        sutInputField.value = 'chocolat en poudre';
        sutAddButton.click();

        // should have 4 elements
        expect( sut.stocks.length ).to.be.equal( 4 );
        expect( sut.stocks[3] ).to.be.equal( 'chocolat en poudre' );
      } );
      teardown( function () {
      } );
    } );
    </script>
  </body>
</html>
